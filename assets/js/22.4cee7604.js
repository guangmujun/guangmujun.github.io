(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{598:function(t,s,a){"use strict";a.r(s);var e=a(7),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_8-6-注册新用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-6-注册新用户"}},[t._v("#")]),t._v(" 8.6 注册新用户")]),t._v(" "),a("p",[t._v("提交注册表单，通过验证后，系统就使用用户填写的信息在数据库中添加一个新用户")]),t._v(" "),a("h3",{attrs:{id:"_8-6-1-添加用户注册表单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-6-1-添加用户注册表单"}},[t._v("#")]),t._v(" 8.6.1 添加用户注册表单")]),t._v(" "),a("p",[a("code",[t._v("app/auth/forms.py")]),t._v(" 见仓库中对应提交记录的文件\nRegexp用于限制用户名只能包含数据字母下划线和点号，EqualTo用于验证两次输入的密码是否一致 "),a("strong",[t._v("注册模板设置")]),t._v(" "),a("code",[t._v("templates/auth/register.html")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('{% extends "base.html" %}\n    {% import "bootstrap/wtf.html" as wtf %}\n    {% block title %}Flasky - Login{% endblock%}\n{% block page_content %}\n<div class="page-header">\n    <h1>注册</h1>\n</div>\n<div class="col-md-4">\n    '+t._s(t.wtf.quick_form(t.form))+"\n</div>\n{% endblock %}\n")])])]),a("p",[a("strong",[t._v("登录页面设置注册链接")]),t._v(" "),a("code",[t._v("templates/auth/login.html")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v('{% extends "base.html" %}\n{% import "bootstrap/wtf.html" as wtf %}\n{% block title %}Flasky - Login{% endblock%}\n{% block page_content %}\n<div class="page-header">\n    <h1>登录</h1>\n</div>\n<div class="col-md-4">\n    '+t._s(t.wtf.quick_form(t.form))+'\n</div>\n<p><a href="'+t._s(t.url_for("auth.register"))+'">新用户注册</a></p>\n{% endblock %}\n')])])]),a("p",[t._v("​")]),t._v(" "),a("h3",{attrs:{id:"_8-6-2-注册新用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-6-2-注册新用户"}},[t._v("#")]),t._v(" 8.6.2 注册新用户")]),t._v(" "),a("p",[a("code",[t._v("app/auth/views.py")])]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\n​    @auth.route('/register', methods=['GET', 'POST'])\n​    def register():\n​        form = RegistrationForm()\n​        if form.validate_on_submit():\n​            user = User(email=form.email.data,\n​                        username=form.username.data,\n​                        password=form.password.data)\n​            db.session.add(user)\n​            flash('注册成功，请登录！')\n​            return redirect(url_for('auth.login'))\n​        return render_template('auth/register.html', form=form)")]),t._v(" "),a("h3",{attrs:{id:"_8-6-3-效果展示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-6-3-效果展示"}},[t._v("#")]),t._v(" 8.6.3 效果展示")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("点击登录按钮 "),a("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210317162031.png",alt:""}})])]),t._v(" "),a("li",[a("p",[t._v("点击“新用户注册” "),a("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210317162052.png",alt:""}})])]),t._v(" "),a("li",[a("p",[t._v("输入注册信息，点击注册 "),a("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210317162131.png",alt:""}}),t._v(" "),a("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210317162152.png",alt:""}})])]),t._v(" "),a("li",[a("p",[t._v("输入新注册的邮箱和密码，登录")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210317162231.png",alt:""}})])])}),[],!1,null,null,null);s.default=n.exports}}]);