(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{588:function(t,a,s){"use strict";s.r(a);var n=s(7),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_10用户资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10用户资料"}},[t._v("#")]),t._v(" 10用户资料")]),t._v(" "),s("h2",{attrs:{id:"_10-1-前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-前言"}},[t._v("#")]),t._v(" 10.1 前言")]),t._v(" "),s("blockquote",[s("p",[t._v("项目地址：https://gitee.com/guangmujun/micro-blog 个人网站：https://guangmujun.cn\nFlask Web学习：https://guangmujun.cn/archives/category/learning-note/flask-web\nMySQL学习：https://guangmujun.cn/archives/category/learning-note/mysql-note 参考：")]),t._v(" "),s("ul",[s("li",[t._v("https://sb.sb/blog/css-cdn/")])])]),t._v(" "),s("h2",{attrs:{id:"_10-2-资料信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-资料信息"}},[t._v("#")]),t._v(" 10.2 资料信息")]),t._v(" "),s("p",[s("code",[t._v("app/models.py")]),t._v("用户信息字段")]),t._v(" "),s("p",[t._v("​"),s("br"),t._v("\n​    class User(UserMixin, db.Model):\n​        "),s("strong",[t._v("tablename")]),t._v(" = 'users'\n​        id = db.Column(db.Integer, primary_key=True)                                # id\n​        email = db.Column(db.String(64), unique=True, index=True)                   # 邮箱\n​        username = db.Column(db.String(64), unique=True, index=True)                # 用户名\n​        role_id = db.Column(db.Integer, db.ForeignKey('roles.id'))                  # 角色id\n​        password_hash = db.Column(db.String(128))                                   # 密码的哈希值\n​        confirmed = db.Column(db.Boolean, default=False)                            # 是否验证\n​        name = db.Column(db.String(64))                                             # 姓名\n​        location = db.Column(db.String(64))                                         # 位置\n​        about_me = db.Column(db.Text())                                             # 自我介绍\n​        member_since = db.Column(db.DateTime(), default=datetime.utcnow)            # 注册日期\n​        last_seen = db.Column(db.DateTime(), default=datetime.utcnow)               # 最后访问日期\n​        avatar_hash = db.Column(db.String(32))                                      # 头像URL中用到的hash值")]),t._v(" "),s("p",[s("code",[t._v("datetime.utcnow")]),t._v("后面没有"),s("code",[t._v("()")]),t._v("，因为"),s("code",[t._v("db.Coumn()")]),t._v("的"),s("code",[t._v("default")]),t._v("参数可以接受函数作为默认值，所以每次需要生成默认值时，"),s("code",[t._v("db.Column()")]),t._v("就会调用指定的函数\n"),s("code",[t._v("app/models.py")]),t._v("刷新用户的最后访问时间")]),t._v(" "),s("p",[t._v("​"),s("br"),t._v('\n​        def ping(self):\n​            """\n​            刷新用户的最后访问时间\n​            :return:\n​            """\n​            self.last_seen = datetime.utcnow()\n​            db.session.add(self)')]),t._v(" "),s("p",[t._v("每次收到用户的请求时，都要调用"),s("code",[t._v("ping()")]),t._v("方法， "),s("code",[t._v("auth")]),t._v("蓝本中的"),s("code",[t._v("before_app_request")]),t._v("处理程序会在每次请求前运行\n"),s("code",[t._v("app/auth/views.py")]),t._v(" 更新已登录用户的访问时间")]),t._v(" "),s("p",[t._v("​"),s("br"),t._v("\n​    @auth.before_app_request\n​    def before_request():\n​        if current_user.is_authenticated:\n​            current_user.ping()                 # 更新已登录用户的访问时间\n​            if not current_user.confirmed "),s("br"),t._v("\n​                and request.endpoint[:5] != 'auth.' "),s("br"),t._v("\n​                and request.endpoint != 'static':\n​                return redirect(url_for('auth.unconfirmed'))")]),t._v(" "),s("h2",{attrs:{id:"_10-3-用户资料页面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-3-用户资料页面"}},[t._v("#")]),t._v(" 10.3 用户资料页面")]),t._v(" "),s("p",[s("code",[t._v("app/main/views.py")]),t._v(" 资料页面的路由")]),t._v(" "),s("p",[t._v("​"),s("br"),t._v("\n​    @main.route('/user/"),s("username",[t._v("')\n​    def user(username):\n​        user = User.query.filter_by(username=username).first()\n​        if user is None:\n​            abort(404)\n​        return render_template('user.html', user=user)")])],1),t._v(" "),s("p",[s("code",[t._v("app/templates/user.html")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v('        {% extends "base.html" %}\n    {% import "bootstrap/wtf.html" as wtf %}\n    {% block title %}Flasky - 个人中心{% endblock%}\n    {% block page_content %}\n    <div class="page-header">\n        <img class="=img-rounded profile-thumbnail" src="'+t._s(t.user.gravatar(t.size=256))+'">\n        <div class="profile-header">\n            <h1>'+t._s(t._f("capitalize")(t.user.username))+"</h1>\n        {% if user.name %}\n        <p>\n            真实姓名：{% if user.name %}"+t._s(t.user.name)+'{% endif %}\n        </p>\n        {% endif %}\n    {% if current_user.is_administrator() %}\n    <p>个人邮箱：<a href="mailto:'+t._s(t.user.email)+'">'+t._s(t.user.email)+"</a></p>\n    {% endif %}\n    {% if user.about_me %}<p>个人介绍："+t._s(t.user.about_me)+"</p>{% endif %}\n    <p>\n        注册时间： "+t._s(t.moment(t.user.member_since).format("L"))+"，\n        "+t._s(t.moment(t.user.last_seen).fromNow())+'来过。\n    </p>\n    <p>\n        {% if user == current_user %}\n        <a class="btn btn-default" href="'+t._s(t.url_for(".edit_profile"))+'">修改资料</a>\n        {% endif %}\n        {% if current_user.is_administrator() %}\n        <a class="btn btn-danger" href="'+t._s(t.url_for(".edit_profile_admin",t.id=t.user.id))+'">修改资料（管理员）</a>\n        {% endif %}\n    </p>\n    </div>\n</div>\n{% endblock %}\n')])])]),s("p",[s("code",[t._v("app/templates/base.html")])]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("    {% block navbar %}\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("navbar navbar-inverse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("role")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("navigation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("navbar-header"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("button"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("navbar-toggle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-toggle")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("collapse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-target")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v(".navbar-collapse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sr-only"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Toggle navigation"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("icon-bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("icon-bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("icon-bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("navbar-brand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Flasky"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("navbar-collapse collapse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ul")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("nav navbar-nav"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("首页"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    {% if current_user.is_authenticated %}\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{ url_for("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("main.user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(", username=current_user.username) }}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("个人中心"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    {% endif %}\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ul")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("ul")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("nav navbar-nav navbar-right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    {% if current_user.is_authenticated %}\n                        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{ url_for("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("auth.logout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(") }}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("退出"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    {% else %}\n                        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{ url_for("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("auth.login"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(") }}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("登录"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{ url_for("),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("auth.register"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(") }}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("注册"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("li")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    {% endif %}\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("ul")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    {% endblock %}\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br")])]),s("h2",{attrs:{id:"_10-4-资料编辑器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-4-资料编辑器"}},[t._v("#")]),t._v(" 10.4 资料编辑器")]),t._v(" "),s("h3",{attrs:{id:"_10-4-1-用户级别的资料编辑器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-4-1-用户级别的资料编辑器"}},[t._v("#")]),t._v(" 10.4.1 用户级别的资料编辑器")]),t._v(" "),s("p",[s("code",[t._v("app/main/forms.py")]),t._v(" 资料编辑表单")]),t._v(" "),s("p",[t._v("​"),s("br"),t._v("\n​    class EditProfileForm(FlaskForm):\n​        name = StringField('真实姓名', validators=[Length(0, 64)])\n​        location = StringField('地址', validators=[Length(0, 64)])\n​        about_me = TextAreaField('自我介绍')\n​        submit = SubmitField('提交')")]),t._v(" "),s("p",[s("code",[t._v("app/main/views.py")]),t._v(" 资料编辑路由")]),t._v(" "),s("p",[t._v("​"),s("br"),t._v("\n​    @main.route('/edit-profile', methods=['GET', 'POST'])\n​    @login_required\n​    def edit_profile():\n​        form = EditProfileForm()\n​        if form.validate_on_submit():\n​            current_user.name = form.name.data\n​            current_user.location = form.location.data\n​            current_user.about_me = form.about_me.data\n​            db.session.add(current_user)\n​            flash(\"资料已更新！\")\n​            return redirect(url_for('.user', username=current_user.username))\n​        form.name.data = current_user.name          # 显示表单之前，为所有字段设定初始值\n​        form.location.data = current_user.location\n​        form.about_me.data = current_user.about_me\n​        return render_template('edit_profile.html', form=form)")]),t._v(" "),s("p",[t._v("显示表单之前，为所有字段设定初始值 "),s("code",[t._v("app/templates/user.html")]),t._v(" 资料编辑链接")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v('      {% block page_content %}\n    <div class="page-header">\n        <img class="=img-rounded profile-thumbnail" src="'+t._s(t.user.gravatar(t.size=256))+'">\n        <div class="profile-header">\n            <h1>'+t._s(t._f("capitalize")(t.user.username))+"</h1>\n        {% if user.name %}\n        <p>\n            真实姓名：{% if user.name %}"+t._s(t.user.name)+'{% endif %}\n        </p>\n        {% endif %}\n  {% if current_user.is_administrator() %}\n    <p>个人邮箱：<a href="mailto:'+t._s(t.user.email)+'">'+t._s(t.user.email)+"</a></p>\n    {% endif %}\n    {% if user.about_me %}<p>个人介绍："+t._s(t.user.about_me)+"</p>{% endif %}\n    <p>\n        注册时间： "+t._s(t.moment(t.user.member_since).format("L"))+"，\n        "+t._s(t.moment(t.user.last_seen).fromNow())+'来过。\n    </p>\n    <p>\n        {% if user == current_user %}\n        <a class="btn btn-default" href="'+t._s(t.url_for(".edit_profile"))+'">修改资料</a>\n        {% endif %}\n        {% if current_user.is_administrator() %}\n        <a class="btn btn-danger" href="'+t._s(t.url_for(".edit_profile_admin",t.id=t.user.id))+'">修改资料（管理员）</a>\n        {% endif %}\n    </p>\n    </div>\n</div>\n{% endblock %}\n')])])]),s("h3",{attrs:{id:"_10-4-2-管理员级别的资料编辑器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-4-2-管理员级别的资料编辑器"}},[t._v("#")]),t._v(" 10.4.2 管理员级别的资料编辑器")]),t._v(" "),s("p",[s("code",[t._v("app/mai n/forms.py")]),t._v(" 管理员使用的资料编辑表单 "),s("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210324195709.png",alt:""}}),t._v(" "),s("code",[t._v("SelectField")]),t._v("实现下拉列表，其实例必须在其"),s("code",[t._v("choices")]),t._v("属性中设置各选项：")]),t._v(" "),s("ul",[s("li",[t._v("选项为一个元组组成的列表，各元组都包含两个元素")]),t._v(" "),s("li",[t._v("选项的标识符+显示在控件中的文本字符串")]),t._v(" "),s("li",[t._v("元组中的标识符是角色的id，是整数，所以"),s("code",[t._v("coerce")]),t._v("参数设置为"),s("code",[t._v("int")]),t._v("，意思是把默认的字符串转化为整数")])]),t._v(" "),s("p",[s("code",[t._v("self.role.choices = [(role.id, role.name) for role in Role.query.order_by(Role.name).all()]")]),t._v(" "),s("code",[t._v("app/main/views.py")]),t._v(" 管理员的资料编辑路由")]),t._v(" "),s("p",[t._v("​"),s("br"),t._v("\n​    @main.route('/edit-profile/"),s("a",{attrs:{href:"int:id"}},[t._v("int:id")]),t._v("', methods=['GET', 'POST'])\n​    @login_required\n​    @admin_required\n​    def edit_profile_admin(id):\n​        user = User.query.get_or_404(id)\n​        form = EditProfileAdminForm(user=user)\n​        if form.validate_on_submit():\n​            user.email = form.email.data\n​            user.username = form.username.data\n​            user.confirmed = form.confirmed.data\n​            user.role = Role.query.get(form.role.data)\n​            user.name = form.name.name\n​            user.location = form.location.data\n​            user.about_me = form.about_me.data\n​            db.session.add(user)\n​            flash(\"个人信息已修改！\")\n​            return redirect(url_for('.user', username=user.username))\n​        form.email.data = user.email\n​        form.username.data = user.username\n​        form.confirmed.data = user.confirmed\n​        form.role.data = user.role\n​        form.name.data = user.name\n​        form.location.data = user.location\n​        form.about_me.data = user.about_me\n​        return render_template('edit_profile.html', form=form, user=user)")]),t._v(" "),s("p",[s("code",[t._v("user.role = Role.query.get(form.role.data)")]),t._v("form.role.data是整数，user.role是角色id对应的角色名称\n"),s("code",[t._v("app/templates/user.html")]),t._v(" 管理员使用的资料编辑链接")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v('      {% block page_content %}\n    <div class="page-header">\n        <img class="=img-rounded profile-thumbnail" src="'+t._s(t.user.gravatar(t.size=256))+'">\n        <div class="profile-header">\n            <h1>'+t._s(t._f("capitalize")(t.user.username))+"</h1>\n        {% if user.name %}\n        <p>\n            真实姓名：{% if user.name %}"+t._s(t.user.name)+'{% endif %}\n        </p>\n        {% endif %}\n  {% if current_user.is_administrator() %}\n    <p>个人邮箱：<a href="mailto:'+t._s(t.user.email)+'">'+t._s(t.user.email)+"</a></p>\n    {% endif %}\n    {% if user.about_me %}<p>个人介绍："+t._s(t.user.about_me)+"</p>{% endif %}\n    <p>\n        注册时间： "+t._s(t.moment(t.user.member_since).format("L"))+"，\n        "+t._s(t.moment(t.user.last_seen).fromNow())+'来过。\n    </p>\n    <p>\n        {% if user == current_user %}\n        <a class="btn btn-default" href="'+t._s(t.url_for(".edit_profile"))+'">修改资料</a>\n        {% endif %}\n        {% if current_user.is_administrator() %}\n        <a class="btn btn-danger" href="'+t._s(t.url_for(".edit_profile_admin",t.id=t.user.id))+'">修改资料（管理员）</a>\n        {% endif %}\n    </p>\n    </div>\n</div>\n{% endblock %}\n')])])]),s("h2",{attrs:{id:"_10-5-用户头像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-5-用户头像"}},[t._v("#")]),t._v(" 10.5 用户头像")]),t._v(" "),s("p",[t._v("Gravatar：根据用户的邮箱地址，计算MD5 散列值，然后生成一个唯一的头像链接 "),s("code",[t._v("aapp/models.py")]),t._v(" 生成"),s("code",[t._v("Gravatar URL")])]),t._v(" "),s("p",[t._v("​"),s("br"),t._v("\n​    import hashlib\n​    from flask import current_app, request")]),t._v(" "),s("p",[t._v("​"),s("br"),t._v("\n​    class User(UserMixin, db.Model):\n​        "),s("strong",[t._v("tablename")]),t._v(" = 'users'\n​        id = db.Column(db.Integer, primary_key=True)                                # id\n​        email = db.Column(db.String(64), unique=True, index=True)                   # 邮箱\n​        username = db.Column(db.String(64), unique=True, index=True)                # 用户名\n​        role_id = db.Column(db.Integer, db.ForeignKey('roles.id'))                  # 角色id\n​        password_hash = db.Column(db.String(128))                                   # 密码的哈希值\n​        confirmed = db.Column(db.Boolean, default=False)                            # 是否验证\n​        name = db.Column(db.String(64))                                             # 姓名\n​        location = db.Column(db.String(64))                                         # 位置\n​        about_me = db.Column(db.Text())                                             # 自我介绍\n​        member_since = db.Column(db.DateTime(), default=datetime.utcnow)            # 注册日期\n​        last_seen = db.Column(db.DateTime(), default=datetime.utcnow)               # 最后访问日期\n​        avatar_hash = db.Column(db.String(32))                                      # 头像URL中用到的hash值\n​"),s("br"),t._v("\ndef "),s("strong",[t._v("init")]),t._v("(self, **kwargs):\nsuper(User, self)."),s("strong",[t._v("init")]),t._v("(**kwargs)                                    # 调用基类构造函数\nif self.role is None:\nif self.email == current_app.config['FLASKY_ADMIN']:                # 管理员\nself.role = Role.query.filter_by(permissions=0xff).first()\nif self.role is None:\nself.role = Role.query.filter_by(default=True).first()          # 用户\nif self.email is not None and self.avatar_hash is None:\nself.avatar_hash = hashlib.md5(self.email.encode('utf-8')).hexdigest()")]),t._v(" "),s("p",[t._v("​"),s("br"),t._v("\n​        def gravatar(self, size=100, default='identicon', rating='g'):\n​            if request.is_secure:\n​                url = 'https://gravatar.loli.net/avatar/'  # gravatar镜像\n​            else:\n​                url = 'http://gravatar.loli.net/avatar'\n​            hash = self.avatar_hash or hashlib.md5(self.email.encode('utf-8')).hexdigest()\n​            return '{url}/{hash}?s={size}&d={default}&r={rating}'.format(url=url, hash=hash,\n​                                                                         size=size, default=default, rating=rating)")]),t._v(" "),s("ul",[s("li",[t._v("缓存头像对应的"),s("code",[t._v("hash")]),t._v("值")]),t._v(" "),s("li",[t._v("注意"),s("code",[t._v("gravatar")]),t._v("函数中使用的"),s("code",[t._v("url")]),t._v("，官方的镜像已经被墙，使用的是镜像，"),s("a",{attrs:{href:"https://sb.sb/blog/css-cdn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("code",[t._v("app/templates/user.html")]),t._v(" 资料页面中的头像")]),t._v(" "),s("div",{staticClass:"language-html line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("  \n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("=img-rounded profile-thumbnail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{ user.gravatar(size=256) }}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h2",{attrs:{id:"_10-6-效果展示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10-6-效果展示"}},[t._v("#")]),t._v(" 10.6 效果展示")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("用户登录后界面 "),s("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210324191438.png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("点击个人中心 "),s("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210324194228.png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("点击修改资料 "),s("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210324194250.png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("登录管理员账号，点击个人中心 "),s("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210324194340.png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("点击修改资料（管理员） "),s("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210324194417.png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("通过用户名或者用户id修改用户资料")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210324194439.png",alt:""}})])])}),[],!1,null,null,null);a.default=e.exports}}]);