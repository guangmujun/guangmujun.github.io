(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{632:function(t,s,a){"use strict";a.r(s);var e=a(7),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ubuntu20-4上安装mysql8并设置远程访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu20-4上安装mysql8并设置远程访问"}},[t._v("#")]),t._v(" Ubuntu20.4上安装MySQL8并设置远程访问")]),t._v(" "),a("h2",{attrs:{id:"_1-前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-前言"}},[t._v("#")]),t._v(" 1 前言")]),t._v(" "),a("p",[t._v("想在本地的一台Ubuntu系统的主机上安装MySQL，并且在局域网内可以使用其他终端连接此数据库~\n走了很多弯路，尝试了很多方法，亲测有效，建议详细看完一遍再动手操作！！！\n本机Ubuntu20.4，安装的MySQL是8.0版本，此版本的MySQL安全性提高，远程访问配置有坑！")]),t._v(" "),a("h2",{attrs:{id:"_2-安装配置测试mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装配置测试mysql"}},[t._v("#")]),t._v(" 2 安装配置测试MySQL")]),t._v(" "),a("h3",{attrs:{id:"_2-1-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-安装"}},[t._v("#")]),t._v(" 2.1 安装")]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\nsudo apt-get update"),a("br"),t._v("\nsudo apt-get install mysql-server")]),t._v(" "),a("p",[t._v("默认安装最新版本的MySQL")]),t._v(" "),a("h3",{attrs:{id:"_2-2-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-配置"}},[t._v("#")]),t._v(" 2.2 配置")]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\nsudo mysql_secure_installation")]),t._v(" "),a("p",[t._v("配置内容如下：【设置密码，N，N，N，Y】")]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\n#1\nVALIDATE PASSWORD PLUGIN can be used to test passwords...\nPress y|Y for Yes, any other key for No: N (选择N ,不会进行密码的强校验)")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("#2\nPlease set the password for root here...\nNew password: (输入密码)\nRe-enter new password: (重复输入)\n\n#3\nBy default, a MySQL installation has an anonymous user,\nallowing anyone to log into MySQL without having to have\na user account created for them...\nRemove anonymous users? (Press y|Y for Yes, any other key for No) : N (选择N，不删除匿名用户)\n\n#4\nNormally, root should only be allowed to connect from\n'localhost'. This ensures that someone cannot guess at\nthe root password from the network...\nDisallow root login remotely? (Press y|Y for Yes, any other key for No) : N (选择N，允许root远程连接)\n\n#5\nBy default, MySQL comes with a database named 'test' that\nanyone can access...\nRemove test database and access to it? (Press y|Y for Yes, any other key for No) : N (选择N，不删除test数据库)\n\n#6\nReloading the privilege tables will ensure that all changes\nmade so far will take effect immediately.\nReload privilege tables now? (Press y|Y for Yes, any other key for No) : Y (选择Y，修改权限立即生效)\n")])])]),a("p",[t._v("​")]),t._v(" "),a("h3",{attrs:{id:"_2-3-测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-测试"}},[t._v("#")]),t._v(" 2.3 测试")]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\nsystemctl status mysql.service")]),t._v(" "),a("p",[t._v("提示activate(running)即表示MySQL正常运行")]),t._v(" "),a("h2",{attrs:{id:"_3-配置远程访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置远程访问"}},[t._v("#")]),t._v(" 3 配置远程访问")]),t._v(" "),a("ol",[a("li",[t._v("输入密码后进入到MySQL中")])]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\nmysql -u root -p")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("切换到mysql数据库")])]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\nuse mysql;")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("查询相关数据")])]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\nselect host,user,plugin from user;")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210312195158.png",alt:""}})]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[t._v("将host改为%")])]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\nupdate user set host = '%' where user = 'root';")]),t._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[t._v("刷新权限")])]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\nFLUSH PRIVILEGES;")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210312195338.png",alt:""}})]),t._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[a("strong",[t._v("更改连接的密码校验方式")])])]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\nALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY'123456';")]),t._v(" "),a("ol",{attrs:{start:"7"}},[a("li",[t._v("刷新权限")])]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\nFLUSH PRIVILEGES;")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210312195508.png",alt:""}})]),t._v(" "),a("ol",{attrs:{start:"8"}},[a("li",[t._v("exit退出MySQL，修改配置文件"),a("code",[t._v("vim /etc/mysql/mysql.conf.d")]),t._v("内容，注释以下两行，即这两行前面要有"),a("code",[t._v("#")]),t._v("号")])]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\n# bind-address      = 127.0.0.1\n# mysqlx-bind-address   = 127.0.0.1")]),t._v(" "),a("ol",{attrs:{start:"9"}},[a("li",[t._v("重新启动MySQL")])]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\nservice mysql restart")]),t._v(" "),a("ol",{attrs:{start:"10"}},[a("li",[a("strong",[t._v("防火墙")]),t._v(" 中开放3306端口")])]),t._v(" "),a("p",[t._v("​"),a("br"),t._v("\nsudo ufw allow 3306\nsudo ufw status")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20210312200025.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"_4-效果展示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-效果展示"}},[t._v("#")]),t._v(" 4 效果展示")]),t._v(" "),a("p",[t._v("MySQL Workbench和Navicat均连接成功 ![](https://my-imags.oss-cn-\nshanghai.aliyuncs.com/pic/20210312200127.png) ![](https://my-imags.oss-cn-\nshanghai.aliyuncs.com/pic/20210312200241.png)")]),t._v(" "),a("h2",{attrs:{id:"_5-坑的地方"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-坑的地方"}},[t._v("#")]),t._v(" 5 坑的地方")]),t._v(" "),a("p",[t._v("只将root对应的host修改为%是没用的，")]),t._v(" "),a("ul",[a("li",[t._v("MySQL8的加密方式不同，安全性能提升了，需要修改")]),t._v(" "),a("li",[t._v("修改host，修改加密方式等MySQL的操作进行之后，都要Flash刷新权限")]),t._v(" "),a("li",[t._v("需要注释掉配置文件中的127.0.0.1字段，MySQL设置完成后要重新启动下服务")]),t._v(" "),a("li",[t._v("还无法连接的话，或者说连接出现2003错误的，就来看看防火墙是否打开了3306端口")])]),t._v(" "),a("p",[t._v("祝好~")]),t._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),a("ul",[a("li",[t._v("https://guangmujun.cn/archives/371")]),t._v(" "),a("li",[t._v("https://blog.csdn.net/weixin_38924500/article/details/106261971")]),t._v(" "),a("li",[t._v("https://blog.csdn.net/wd2014610/article/details/89023562")])])])}),[],!1,null,null,null);s.default=r.exports}}]);