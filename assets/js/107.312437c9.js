(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{683:function(_,v,t){"use strict";t.r(v);var d=t(7),a=Object(d.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h2",{attrs:{id:"案例介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#案例介绍"}},[_._v("#")]),_._v(" 案例介绍")]),_._v(" "),t("p",[_._v("申请学校时，什么样的学生容易被录取")]),_._v(" "),t("h2",{attrs:{id:"数据介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据介绍"}},[_._v("#")]),_._v(" 数据介绍")]),_._v(" "),t("ol",[t("li",[_._v("原始数据存储在"),t("code",[_._v("Application.csv")]),_._v("中")]),_._v(" "),t("li",[_._v("3个自变量：")])]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[_._v("* `gre`：GRE成绩（连续变量）\n* `gpa`：平均绩点（连续变量）\n* `rank` ：学校排名（离散变量）\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[_._v("1个因变量：")])]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[_._v("* `admit`：值为1表示录取，值为0表示拒绝（二分类变量）\n")])])]),t("h2",{attrs:{id:"eda"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#eda"}},[_._v("#")]),_._v(" EDA")]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\n# 导入包\nimport pandas as pd\nimport numpy as np\nimport statsmodels.api as sm\nimport pylab as pl\nimport warnings")]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[_._v("warnings.filterwarnings('ignore')\n%matplotlib inline\n")])])]),t("p",[_._v("​"),t("br"),_._v("\n​"),t("br"),_._v("\n# 载入数据\ndata = pd.read_csv('Application.csv')\ndata.head()")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("admit")]),_._v(" "),t("th",[_._v("gre")]),_._v(" "),t("th",[_._v("gpa")]),_._v(" "),t("th",[_._v("rank")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("380")]),_._v(" "),t("td",[_._v("3.61")])]),_._v(" "),t("tr",[t("td",[_._v("1")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("660")]),_._v(" "),t("td",[_._v("3.67")])]),_._v(" "),t("tr",[t("td",[_._v("2")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("800")]),_._v(" "),t("td",[_._v("4.00")])]),_._v(" "),t("tr",[t("td",[_._v("3")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("640")]),_._v(" "),t("td",[_._v("3.19")])]),_._v(" "),t("tr",[t("td",[_._v("4")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("520")]),_._v(" "),t("td",[_._v("2.93")])])])]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[_._v("## pandas中有系统变量名为rank，为防止产生混淆，将原始的rank修改为sch_rank\ndata['sch_rank'] = data['rank']\ndel data['rank']\ndata.describe()\n")])])]),t("table",[t("thead",[t("tr",[t("th",[_._v("admit")]),_._v(" "),t("th",[_._v("gre")]),_._v(" "),t("th",[_._v("gpa")]),_._v(" "),t("th",[_._v("sch_rank")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("count")]),_._v(" "),t("td",[_._v("400.000000")]),_._v(" "),t("td",[_._v("400.000000")]),_._v(" "),t("td",[_._v("400.000000")])]),_._v(" "),t("tr",[t("td",[_._v("mean")]),_._v(" "),t("td",[_._v("0.317500")]),_._v(" "),t("td",[_._v("587.700000")]),_._v(" "),t("td",[_._v("3.389900")])]),_._v(" "),t("tr",[t("td",[_._v("std")]),_._v(" "),t("td",[_._v("0.466087")]),_._v(" "),t("td",[_._v("115.516536")]),_._v(" "),t("td",[_._v("0.380567")])]),_._v(" "),t("tr",[t("td",[_._v("min")]),_._v(" "),t("td",[_._v("0.000000")]),_._v(" "),t("td",[_._v("220.000000")]),_._v(" "),t("td",[_._v("2.260000")])]),_._v(" "),t("tr",[t("td",[_._v("25%")]),_._v(" "),t("td",[_._v("0.000000")]),_._v(" "),t("td",[_._v("520.000000")]),_._v(" "),t("td",[_._v("3.130000")])]),_._v(" "),t("tr",[t("td",[_._v("50%")]),_._v(" "),t("td",[_._v("0.000000")]),_._v(" "),t("td",[_._v("580.000000")]),_._v(" "),t("td",[_._v("3.395000")])]),_._v(" "),t("tr",[t("td",[_._v("75%")]),_._v(" "),t("td",[_._v("1.000000")]),_._v(" "),t("td",[_._v("660.000000")]),_._v(" "),t("td",[_._v("3.670000")])]),_._v(" "),t("tr",[t("td",[_._v("max")]),_._v(" "),t("td",[_._v("1.000000")]),_._v(" "),t("td",[_._v("800.000000")]),_._v(" "),t("td",[_._v("4.000000")])])])]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[_._v("# 交叉频数分析：观察自变量和因变量之间的关系\npd.crosstab(data['admit'], data['sch_rank'], rownames=['admit'])\n")])])]),t("table",[t("thead",[t("tr",[t("th",[_._v("sch_rank")]),_._v(" "),t("th",[_._v("1")]),_._v(" "),t("th",[_._v("2")]),_._v(" "),t("th",[_._v("3")]),_._v(" "),t("th",[_._v("4")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("admit")]),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td")]),_._v(" "),t("tr",[t("td",[_._v("0")]),_._v(" "),t("td",[_._v("28")]),_._v(" "),t("td",[_._v("97")]),_._v(" "),t("td",[_._v("93")]),_._v(" "),t("td",[_._v("55")])]),_._v(" "),t("tr",[t("td",[_._v("1")]),_._v(" "),t("td",[_._v("33")]),_._v(" "),t("td",[_._v("54")]),_._v(" "),t("td",[_._v("28")]),_._v(" "),t("td",[_._v("12")])])])]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[_._v("pd.crosstab(data['admit'], data['gre'], rownames=['admit'])\n")])])]),t("p",[_._v("gre | 220 | 300 | 340 | 360 | 380 | 400 | 420 | 440 | 460 | 480 | ... | 620 |")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("640")]),_._v(" "),t("th",[_._v("660")]),_._v(" "),t("th",[_._v("680")]),_._v(" "),t("th",[_._v("700")]),_._v(" "),t("th",[_._v("720")]),_._v(" "),t("th",[_._v("740")]),_._v(" "),t("th",[_._v("760")]),_._v(" "),t("th",[_._v("780")]),_._v(" "),t("th",[_._v("800")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("admit")]),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td")]),_._v(" "),t("tr",[t("td",[_._v("0")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("2")]),_._v(" "),t("td",[_._v("3")]),_._v(" "),t("td",[_._v("4")]),_._v(" "),t("td",[_._v("8")]),_._v(" "),t("td",[_._v("9")]),_._v(" "),t("td",[_._v("7")]),_._v(" "),t("td",[_._v("8")])]),_._v(" "),t("tr",[t("td",[_._v("7")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("14")]),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td")]),_._v(" "),t("tr",[t("td",[_._v("1")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("2")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("2")])]),_._v(" "),t("tr",[t("td",[_._v("4")]),_._v(" "),t("td",[_._v("4")]),_._v(" "),t("td",[_._v("11")]),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td")])])]),_._v(" "),t("p",[_._v("2 rows × 26 columns")]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\npd.crosstab(data['admit'], data['gpa'], rownames=['admit'])")]),_._v(" "),t("p",[_._v("gpa | 2.26 | 2.42 | 2.48 | 2.52 | 2.55 | 2.56 | 2.62 | 2.63 | 2.65 | 2.67 |")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("...")]),_._v(" "),t("th",[_._v("3.90")]),_._v(" "),t("th",[_._v("3.91")]),_._v(" "),t("th",[_._v("3.92")]),_._v(" "),t("th",[_._v("3.93")]),_._v(" "),t("th",[_._v("3.94")]),_._v(" "),t("th",[_._v("3.95")]),_._v(" "),t("th",[_._v("3.97")]),_._v(" "),t("th",[_._v("3.98")]),_._v(" "),t("th",[_._v("3.99")]),_._v(" "),t("th",[_._v("4.00")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("admit")]),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td")]),_._v(" "),t("tr",[t("td",[_._v("0")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("1")])]),_._v(" "),t("tr",[t("td",[_._v("0")]),_._v(" "),t("td",[_._v("2")]),_._v(" "),t("td",[_._v("15")]),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td")]),_._v(" "),t("tr",[t("td",[_._v("1")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("1")])]),_._v(" "),t("tr",[t("td",[_._v("1")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("13")]),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td")])])]),_._v(" "),t("p",[_._v("2 rows × 132 columns")]),_._v(" "),t("p",[_._v("pandas.crosstab(index, columns, rownames=None) - index：行中要分组的值 -\ncolumns：列中要分组的值 - rownames：行的名称（意思是每一行的名称来自哪里） 由上述分析，大致可以发现： -\n申请者来自的学校排名靠前，则录取的比例相对较大 - 从显示出来的gre和gra数据，和录取比列的关系不是特别明显")]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\n# 直方图可视化\ndata.hist()")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200406153719945.png",alt:"在这里插入图片描述"}}),_._v("\n从图可知，"),t("code",[_._v("gra")]),_._v("、"),t("code",[_._v("gre")]),_._v("和"),t("code",[_._v("sch_rank")]),_._v("大致服从正态分布，"),t("code",[_._v("admit")]),_._v("中拒绝的比例较高。")]),_._v(" "),t("h2",{attrs:{id:"特征工程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特征工程"}},[_._v("#")]),_._v(" 特征工程")]),_._v(" "),t("ol",[t("li",[_._v("onehot编码")])]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[_._v("* 对分类变量`sch_rank`进行哑变量转化\n* 以`sch_rank_4`为参考\n")])])]),t("p",[_._v("​"),t("br"),_._v("\n​"),t("br"),_._v("\ndata['sch_rank'].value_counts()")]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\n​"),t("br"),_._v("\n2    151\n3    121\n4     67\n1     61\nName: sch_rank, dtype: int64")]),_._v(" "),t("p",[t("code",[_._v("sch_rank")]),_._v("中只有4个取值，值为1的时候表示排名最高，这个排民特征可能已经做过分桶处理，分成了以上四类。")]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\ndummy_ranks = pd.get_dummies(data['sch_rank'], prefix='sch_rank')  # prefix指变化后的名称基准\ndummy_ranks.head()")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("sch_rank_1")]),_._v(" "),t("th",[_._v("sch_rank_2")]),_._v(" "),t("th",[_._v("sch_rank_3")]),_._v(" "),t("th",[_._v("sch_rank_4")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("1")])]),_._v(" "),t("tr",[t("td",[_._v("1")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("1")])]),_._v(" "),t("tr",[t("td",[_._v("2")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])]),_._v(" "),t("tr",[t("td",[_._v("3")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])]),_._v(" "),t("tr",[t("td",[_._v("4")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])])])]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[_._v("# ix：基于标签位置的索引器\n# 所有行，从开始到sch_rank_3列\ndummy_ranks.ix[:,:'sch_rank_3']\n")])])]),t("table",[t("thead",[t("tr",[t("th",[_._v("sch_rank_1")]),_._v(" "),t("th",[_._v("sch_rank_2")]),_._v(" "),t("th",[_._v("sch_rank_3")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])]),_._v(" "),t("tr",[t("td",[_._v("1")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])]),_._v(" "),t("tr",[t("td",[_._v("2")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("0")])]),_._v(" "),t("tr",[t("td",[_._v("3")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])]),_._v(" "),t("tr",[t("td",[_._v("4")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])]),_._v(" "),t("tr",[t("td",[_._v("...")]),_._v(" "),t("td",[_._v("...")]),_._v(" "),t("td",[_._v("...")])]),_._v(" "),t("tr",[t("td",[_._v("395")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("1")])]),_._v(" "),t("tr",[t("td",[_._v("396")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])]),_._v(" "),t("tr",[t("td",[_._v("397")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("1")])]),_._v(" "),t("tr",[t("td",[_._v("398")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("1")])]),_._v(" "),t("tr",[t("td",[_._v("399")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])])])]),_._v(" "),t("p",[_._v("400 rows × 3 columns")]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\n# 合并数据\ndel data['sch_rank']\ndata = data.join(dummy_ranks.ix[:,:'sch_rank_3'])\ndata.head()")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("admit")]),_._v(" "),t("th",[_._v("gre")]),_._v(" "),t("th",[_._v("gpa")]),_._v(" "),t("th",[_._v("sch_rank_1")]),_._v(" "),t("th",[_._v("sch_rank_2")]),_._v(" "),t("th",[_._v("sch_rank_3")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("380")]),_._v(" "),t("td",[_._v("3.61")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])]),_._v(" "),t("tr",[t("td",[_._v("1")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("660")]),_._v(" "),t("td",[_._v("3.67")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])]),_._v(" "),t("tr",[t("td",[_._v("2")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("800")]),_._v(" "),t("td",[_._v("4.00")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("0")])]),_._v(" "),t("tr",[t("td",[_._v("3")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("640")]),_._v(" "),t("td",[_._v("3.19")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])]),_._v(" "),t("tr",[t("td",[_._v("4")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("520")]),_._v(" "),t("td",[_._v("2.93")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])])])]),_._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[_._v("手动添加常数项")])]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[_._v("* statsmodels库中的Logit() 函数不会自动添加常数项\n")])])]),t("p",[_._v("​"),t("br"),_._v("\n​"),t("br"),_._v("\ndata['intercept'] = 1.0\ndata.head()")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("admit")]),_._v(" "),t("th",[_._v("gre")]),_._v(" "),t("th",[_._v("gpa")]),_._v(" "),t("th",[_._v("sch_rank_1")]),_._v(" "),t("th",[_._v("sch_rank_2")]),_._v(" "),t("th",[_._v("sch_rank_3")]),_._v(" "),t("th",[_._v("intercept")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("380")]),_._v(" "),t("td",[_._v("3.61")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("1")])]),_._v(" "),t("tr",[t("td",[_._v("1")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("660")]),_._v(" "),t("td",[_._v("3.67")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("1")])]),_._v(" "),t("tr",[t("td",[_._v("2")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("800")]),_._v(" "),t("td",[_._v("4.00")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])]),_._v(" "),t("tr",[t("td",[_._v("3")]),_._v(" "),t("td",[_._v("1")]),_._v(" "),t("td",[_._v("640")]),_._v(" "),t("td",[_._v("3.19")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])]),_._v(" "),t("tr",[t("td",[_._v("4")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("520")]),_._v(" "),t("td",[_._v("2.93")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")]),_._v(" "),t("td",[_._v("0")])])])]),_._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[_._v("提取数据")])]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\ndata.describe()")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("admit")]),_._v(" "),t("th",[_._v("gre")]),_._v(" "),t("th",[_._v("gpa")]),_._v(" "),t("th",[_._v("sch_rank_1")]),_._v(" "),t("th",[_._v("sch_rank_2")]),_._v(" "),t("th",[_._v("sch_rank_3")]),_._v(" "),t("th",[_._v("intercept")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("count")]),_._v(" "),t("td",[_._v("400.000000")]),_._v(" "),t("td",[_._v("400.000000")]),_._v(" "),t("td",[_._v("400.000000")]),_._v(" "),t("td",[_._v("400.000000")]),_._v(" "),t("td",[_._v("400.000000")]),_._v(" "),t("td")]),_._v(" "),t("tr",[t("td",[_._v("400.000000")]),_._v(" "),t("td",[_._v("400.0")]),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td"),_._v(" "),t("td")]),_._v(" "),t("tr",[t("td",[_._v("mean")]),_._v(" "),t("td",[_._v("0.317500")]),_._v(" "),t("td",[_._v("587.700000")]),_._v(" "),t("td",[_._v("3.389900")]),_._v(" "),t("td",[_._v("0.152500")]),_._v(" "),t("td",[_._v("0.377500")]),_._v(" "),t("td",[_._v("0.302500")])]),_._v(" "),t("tr",[t("td",[_._v("std")]),_._v(" "),t("td",[_._v("0.466087")]),_._v(" "),t("td",[_._v("115.516536")]),_._v(" "),t("td",[_._v("0.380567")]),_._v(" "),t("td",[_._v("0.359955")]),_._v(" "),t("td",[_._v("0.485369")]),_._v(" "),t("td",[_._v("0.459916")])]),_._v(" "),t("tr",[t("td",[_._v("min")]),_._v(" "),t("td",[_._v("0.000000")]),_._v(" "),t("td",[_._v("220.000000")]),_._v(" "),t("td",[_._v("2.260000")]),_._v(" "),t("td",[_._v("0.000000")]),_._v(" "),t("td",[_._v("0.000000")]),_._v(" "),t("td",[_._v("0.000000")])]),_._v(" "),t("tr",[t("td",[_._v("25%")]),_._v(" "),t("td",[_._v("0.000000")]),_._v(" "),t("td",[_._v("520.000000")]),_._v(" "),t("td",[_._v("3.130000")]),_._v(" "),t("td",[_._v("0.000000")]),_._v(" "),t("td",[_._v("0.000000")]),_._v(" "),t("td",[_._v("0.000000")])]),_._v(" "),t("tr",[t("td",[_._v("50%")]),_._v(" "),t("td",[_._v("0.000000")]),_._v(" "),t("td",[_._v("580.000000")]),_._v(" "),t("td",[_._v("3.395000")]),_._v(" "),t("td",[_._v("0.000000")]),_._v(" "),t("td",[_._v("0.000000")]),_._v(" "),t("td",[_._v("0.000000")])]),_._v(" "),t("tr",[t("td",[_._v("75%")]),_._v(" "),t("td",[_._v("1.000000")]),_._v(" "),t("td",[_._v("660.000000")]),_._v(" "),t("td",[_._v("3.670000")]),_._v(" "),t("td",[_._v("0.000000")]),_._v(" "),t("td",[_._v("1.000000")]),_._v(" "),t("td",[_._v("1.000000")])]),_._v(" "),t("tr",[t("td",[_._v("max")]),_._v(" "),t("td",[_._v("1.000000")]),_._v(" "),t("td",[_._v("800.000000")]),_._v(" "),t("td",[_._v("4.000000")]),_._v(" "),t("td",[_._v("1.000000")]),_._v(" "),t("td",[_._v("1.000000")]),_._v(" "),t("td",[_._v("1.000000")])])])]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[_._v("data.columns\n")])])]),t("p",[_._v("​"),t("br"),_._v("\n​"),t("br"),_._v("\nIndex(['admit', 'gre', 'gpa', 'sch_rank_1', 'sch_rank_2', 'sch_rank_3',\n'intercept'],\ndtype='object')")]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\n​"),t("br"),_._v("\ntrain_data = data[data.columns[1:]]\ntrain_data.columns")]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\n​"),t("br"),_._v("\nIndex(['gre', 'gpa', 'sch_rank_1', 'sch_rank_2', 'sch_rank_3', 'intercept'], dtype='object')")]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\n​"),t("br"),_._v("\ntest_data = data['admit']")]),_._v(" "),t("h2",{attrs:{id:"建立模型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#建立模型"}},[_._v("#")]),_._v(" 建立模型")]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\nlogit = sm.Logit(test_data, train_data)\nresult = logit.fit()")]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\n​"),t("br"),_._v("\nOptimization terminated successfully.\nCurrent function value: 0.573147\nIterations 6")]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\n​"),t("br"),_._v("\nresult.summary()")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("Logit Regression Results Dep. Variable:")]),_._v(" "),t("th",[_._v("admit")]),_._v(" "),t("th",[_._v("No. Observations:")]),_._v(" "),t("th",[_._v("400")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("Model:")]),_._v(" "),t("td",[_._v("Logit")]),_._v(" "),t("td",[_._v("Df Residuals:")]),_._v(" "),t("td",[_._v("394")])]),_._v(" "),t("tr",[t("td",[_._v("Method:")]),_._v(" "),t("td",[_._v("MLE")]),_._v(" "),t("td",[_._v("Df Model:")]),_._v(" "),t("td",[_._v("5")])]),_._v(" "),t("tr",[t("td",[_._v("Date:")]),_._v(" "),t("td",[_._v("Mon, 06 Apr 2020")]),_._v(" "),t("td",[_._v("Pseudo R-squ.:")]),_._v(" "),t("td",[_._v("0.08292")])]),_._v(" "),t("tr",[t("td",[_._v("Time:")]),_._v(" "),t("td",[_._v("15:05:23")]),_._v(" "),t("td",[_._v("Log-Likelihood:")]),_._v(" "),t("td",[_._v("-229.26")])]),_._v(" "),t("tr",[t("td",[_._v("converged:")]),_._v(" "),t("td",[_._v("True")]),_._v(" "),t("td",[_._v("LL-Null:")]),_._v(" "),t("td",[_._v("-249.99")])]),_._v(" "),t("tr",[t("td",[_._v("Covariance Type:")]),_._v(" "),t("td",[_._v("nonrobust")]),_._v(" "),t("td",[_._v("LLR p-value:")]),_._v(" "),t("td",[_._v("7.578e-08")])]),_._v(" "),t("tr",[t("td",[_._v("coef")]),_._v(" "),t("td",[_._v("std err")]),_._v(" "),t("td",[_._v("z")]),_._v(" "),t("td",[_._v("P>")])]),_._v(" "),t("tr",[t("td",[_._v("---")]),_._v(" "),t("td",[_._v("---")]),_._v(" "),t("td",[_._v("---")]),_._v(" "),t("td",[_._v("---")])]),_._v(" "),t("tr",[t("td",[_._v("gre")]),_._v(" "),t("td",[_._v("0.0023")]),_._v(" "),t("td",[_._v("0.001")]),_._v(" "),t("td",[_._v("2.070")])]),_._v(" "),t("tr",[t("td",[_._v("gpa")]),_._v(" "),t("td",[_._v("0.8040")]),_._v(" "),t("td",[_._v("0.332")]),_._v(" "),t("td",[_._v("2.423")])]),_._v(" "),t("tr",[t("td",[_._v("sch_rank_1")]),_._v(" "),t("td",[_._v("1.5515")]),_._v(" "),t("td",[_._v("0.418")]),_._v(" "),t("td",[_._v("3.713")])]),_._v(" "),t("tr",[t("td",[_._v("sch_rank_2")]),_._v(" "),t("td",[_._v("0.8760")]),_._v(" "),t("td",[_._v("0.367")]),_._v(" "),t("td",[_._v("2.389")])]),_._v(" "),t("tr",[t("td",[_._v("sch_rank_3")]),_._v(" "),t("td",[_._v("0.2113")]),_._v(" "),t("td",[_._v("0.393")]),_._v(" "),t("td",[_._v("0.538")])]),_._v(" "),t("tr",[t("td",[_._v("intercept")]),_._v(" "),t("td",[_._v("-5.5414")]),_._v(" "),t("td",[_._v("1.138")]),_._v(" "),t("td",[_._v("-4.869")])])])]),_._v(" "),t("h2",{attrs:{id:"结果分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#结果分析"}},[_._v("#")]),_._v(" 结果分析")]),_._v(" "),t("ol",[t("li",[_._v("模型形式")])]),_._v(" "),t("p",[_._v("$$log it = ln(p_1 / p_0) =\n-5.5414+0.0023gre+0.8040gpa+1.5515(sch_rank=1)+0.8760(sch_rank=2)$$\n因为sch_rank_3的p值为0.591，不显著，所以舍去此特征。")]),_._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[_._v("系数解读")])]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[_._v("* 当其他变量保持不变时，申请者GRE成绩每增加1分，其被录取的对数$ln({p_1} / {p _0})$增加0.0023，即胜率Odds变为原来的$e^{0.0023}=1.002$倍\n* 当其他变量保持不变时，申请者GPA每增加1个绩点，其被录取的胜率变为原来的2.23倍，符合常理，通常满绩点才为4或者5\n* 当其他变量保持不变时，申请者的学校排名为1的时候，相较于来自学校排名为4的申请者，其被录取的胜率变为原来的4.72倍；当申请者的学校排名为2的时候，对应倍数为2.40倍，均符合常理\n")])])]),t("p",[_._v("​"),t("br"),_._v("\n​"),t("br"),_._v("\n# 求各个系数的指数值\nnp.exp(result.params)")]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\n​"),t("br"),_._v("\ngre           1.002267\ngpa           2.234545\nsch_rank_1    4.718371\nsch_rank_2    2.401325\nsch_rank_3    1.235233\nintercept     0.003921\ndtype: float64")]),_._v(" "),t("p",[_._v("​"),t("br"),_._v("\n​"),t("br"),_._v("\n# 输出Odds和95%置信区间\nresult.conf_int()  # 返回拟合参数的置信区间，0表示区间下限，1表示区间上限")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("0")]),_._v(" "),t("th",[_._v("1")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("gre")]),_._v(" "),t("td",[_._v("0.000120")])]),_._v(" "),t("tr",[t("td",[_._v("gpa")]),_._v(" "),t("td",[_._v("0.153684")])]),_._v(" "),t("tr",[t("td",[_._v("sch_rank_1")]),_._v(" "),t("td",[_._v("0.732529")])]),_._v(" "),t("tr",[t("td",[_._v("sch_rank_2")]),_._v(" "),t("td",[_._v("0.157233")])]),_._v(" "),t("tr",[t("td",[_._v("sch_rank_3")]),_._v(" "),t("td",[_._v("-0.558726")])]),_._v(" "),t("tr",[t("td",[_._v("intercept")]),_._v(" "),t("td",[_._v("-7.772024")])])])]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[_._v("conf = result.conf_int()\nconf['Odds'] = result.params\nconf.columns = ['区间下限','区间上限','Odds值']\nnp.exp(conf)  # 需要做指数变换\n")])])]),t("table",[t("thead",[t("tr",[t("th",[_._v("区间下限")]),_._v(" "),t("th",[_._v("区间上限")]),_._v(" "),t("th",[_._v("Odds值")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("gre")]),_._v(" "),t("td",[_._v("1.000120")]),_._v(" "),t("td",[_._v("1.004418")])]),_._v(" "),t("tr",[t("td",[_._v("gpa")]),_._v(" "),t("td",[_._v("1.166122")]),_._v(" "),t("td",[_._v("4.281877")])]),_._v(" "),t("tr",[t("td",[_._v("sch_rank_1")]),_._v(" "),t("td",[_._v("2.080335")]),_._v(" "),t("td",[_._v("10.701658")])]),_._v(" "),t("tr",[t("td",[_._v("sch_rank_2")]),_._v(" "),t("td",[_._v("1.170269")]),_._v(" "),t("td",[_._v("4.927383")])]),_._v(" "),t("tr",[t("td",[_._v("sch_rank_3")]),_._v(" "),t("td",[_._v("0.571937")]),_._v(" "),t("td",[_._v("2.667776")])]),_._v(" "),t("tr",[t("td",[_._v("intercept")]),_._v(" "),t("td",[_._v("0.000421")]),_._v(" "),t("td",[_._v("0.036485")])])])]),_._v(" "),t("h2",{attrs:{id:"问题记录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题记录"}},[_._v("#")]),_._v(" 问题记录")]),_._v(" "),t("ol",[t("li",[_._v("result.summary()中各个指标的含义")])]),_._v(" "),t("blockquote",[t("p",[_._v("参考：https://zhuanlan.zhihu.com/p/27699336")])])])}),[],!1,null,null,null);v.default=a.exports}}]);