(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{602:function(e,t,_){"use strict";_.r(t);var v=_(7),l=Object(v.a)({},(function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h1",{attrs:{id:"f3数据库迁移的汇总"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#f3数据库迁移的汇总"}},[e._v("#")]),e._v(" F3数据库迁移的汇总")]),e._v(" "),_("p",[e._v("Flask-Migrate 数据库迁移还是很好用的，建议了解下~ 问题一： 一次数据库的误操作，导致，数据库连接成功，但是操作users表时，电脑卡死\n解决办法： 打开数据库的客户端，查看目前的进程，把所有进程全部kill掉")]),e._v(" "),_("p",[e._v("​"),_("br"),e._v("\n-- 查看数据库系统进程\nshow full processlist;\n-- 杀掉进程（杀掉卡住的进程）\nkill 'thread id';")]),e._v(" "),_("p",[e._v("​")]),e._v(" "),_("p",[e._v("然后重启MySQL")]),e._v(" "),_("p",[e._v("​"),_("br"),e._v("\nservice mysql restart")]),e._v(" "),_("blockquote",[_("p",[e._v("参考：")]),e._v(" "),_("ul",[_("li")]),e._v(" "),_("p",[e._v("https://blog.csdn.net/scdncby/article/details/108617130?utm_medium=distribute.pc_relevant.none-\ntask-blog-\nBlogCommendFromMachineLearnPai2-1.control&dist_request_id=&depth_1-utm_source=distribute.pc_relevant.none-\ntask-blog-BlogCommendFromMachineLearnPai2-1.control")])]),e._v(" "),_("p",[e._v("问题二： 当时在处理问题一时，不小心，直接把users表删除了，怎么恢复？ 解决办法： 进入到shell")]),e._v(" "),_("p",[e._v("​"),_("br"),e._v("\ndb.create_all()")]),e._v(" "),_("p",[e._v("如果不行，将迁移的版本回退到最初始的版本")]),e._v(" "),_("p",[e._v("​"),_("br"),e._v("\ndb downgrade 版本号")]),e._v(" "),_("blockquote",[_("p",[e._v("参考：")]),e._v(" "),_("ul",[_("li",[e._v("https://blog.csdn.net/qq_39147299/article/details/109498464")])])]),e._v(" "),_("p",[e._v("问题三： 创建迁移脚本时，提示"),_("code",[e._v("ERROR [root] Error: Target database is not up to date。")]),e._v("，使用了"),_("code",[e._v("db upgrade")]),e._v("也不行 解决办法：")]),e._v(" "),_("ol",[_("li",[e._v("先使用"),_("code",[e._v("db history")]),e._v("，看看迁移的版本，以及目前head所在位置的版本号")]),e._v(" "),_("li",[e._v("查看数据库中的"),_("code",[e._v("alembic_version")]),e._v("表中的"),_("code",[e._v("version_num")]),e._v("的版本号，替换成步骤1中的版本号")]),e._v(" "),_("li",[e._v("然后创建迁移脚本，可正常使用")])]),e._v(" "),_("blockquote",[_("p",[e._v("参考：")]),e._v(" "),_("ul",[_("li",[e._v("https://blog.csdn.net/qq_43193386/article/details/99959841")])])])])}),[],!1,null,null,null);t.default=l.exports}}]);