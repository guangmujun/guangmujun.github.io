(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{701:function(t,a,c){"use strict";c.r(a);var s=c(7),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,c=t._self._c||a;return c("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[c("h2",{attrs:{id:"踩坑记录-一定要看"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#踩坑记录-一定要看"}},[t._v("#")]),t._v(" 踩坑记录，一定要看！")]),t._v(" "),c("blockquote",[c("p",[t._v("安装Pytorch对应的CUDA时，建议使用10.2或者10.1版本")])]),t._v(" "),c("p",[t._v("笔者显卡对应的CUDA为11.0，但是从Pytorch官网上可以看到目前其最高支持的版本是10.2，所以在给自己的电脑配置GPU环境时，装个10.2版本的CUDA就好，总之两者一定要对应起来！！！")]),t._v(" "),c("blockquote",[c("p",[t._v("安装Pytorch时，如果删除掉 -c pytorch参数，会默认给您安排上cpu版本的Pytorch")])]),t._v(" "),c("p",[t._v("此条命令一出，烦恼全无~")]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",[c("code",[t._v("conda install pytorch torchvision cudatoolkit=10.2 -c https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/\n")])])]),c("blockquote",[c("p",[t._v("感慨一下，想要安装某些东西时，不要急着按照一个教程就去安装，真的，网上的教程鱼龙混杂，看个一两篇，有的时候真的不行，多对比几个安装教程，多搜索一下安装过程中可能会有哪些坑，能很大程度的提高您安装的成功率，节约您的时间成本，祝：一切顺利，安装成功！")])]),t._v(" "),c("h2",{attrs:{id:"配置gpu环境"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#配置gpu环境"}},[t._v("#")]),t._v(" 配置GPU环境")]),t._v(" "),c("p",[c("em",[t._v("建议安装CUDA10.2!!!")])]),t._v(" "),c("h3",{attrs:{id:"查看显卡的cuda版本号"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#查看显卡的cuda版本号"}},[t._v("#")]),t._v(" 查看显卡的CUDA版本号")]),t._v(" "),c("ol",[c("li",[t._v("打开控制面板")]),t._v(" "),c("li",[t._v("点击NVIDIA控制面板")]),t._v(" "),c("li",[t._v("点击系统信息")]),t._v(" "),c("li",[t._v("点击组件")]),t._v(" "),c("li",[t._v("看到CUDA对版本为11.0.208")])]),t._v(" "),c("p",[c("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20201018141927.png",alt:""}}),t._v(" "),c("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20201018142012.png",alt:""}})]),t._v(" "),c("h3",{attrs:{id:"安装cuda"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#安装cuda"}},[t._v("#")]),t._v(" 安装CUDA")]),t._v(" "),c("ol",[c("li",[t._v("下载地址，"),c("a",{attrs:{href:"https://developer.nvidia.com/cuda-11.0-update1-download-archive?target_os=Windows&target_arch=x86_64&target_version=10&target_type=exelocal",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),c("OutboundLink")],1)]),t._v(" "),c("li",[t._v("选择对应的配置，点击下载即可")])]),t._v(" "),c("p",[c("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20201018142214.png",alt:""}})]),t._v(" "),c("ol",{attrs:{start:"3"}},[c("li",[t._v("以管理员身份运行exe，安装过程中，选择自定义安装选项，只勾选CUDA组件，其他选项默认即可")])]),t._v(" "),c("p",[c("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20201018144818.png",alt:""}})]),t._v(" "),c("h3",{attrs:{id:"安装cudnn"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#安装cudnn"}},[t._v("#")]),t._v(" 安装cuDNN")]),t._v(" "),c("ol",[c("li",[c("p",[t._v("登录"),c("a",{attrs:{href:"https://developer.nvidia.com/rdp/cudnn-download",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),c("OutboundLink")],1)])]),t._v(" "),c("li",[c("p",[t._v("下载对应CUDA版本的cuDNN")])])]),t._v(" "),c("p",[c("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20201018142357.png",alt:""}}),t._v(" "),c("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20201018142545.png",alt:""}})]),t._v(" "),c("ol",{attrs:{start:"3"}},[c("li",[t._v("下载完成后，将压缩包解压，将其中的bin目录添加到系统变量中")])]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",[c("code",[t._v("* 右击我的电脑\n* 选择高级系统设置\n* 在弹出的窗口中选择环境变量\n* 点击系统变量区域的新建按钮\n* 点击浏览目录，选择bin文件夹\n* 自己写个变量名，点击确定即可\n")])])]),c("p",[c("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20201018145613.png",alt:""}}),t._v(" "),c("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20201018145536.png",alt:""}}),t._v(" "),c("strong",[t._v("补充：")]),t._v(" 针对上述的第三步，也可不进行环境变量的配置，将压缩包中三个文件中的文件分别复制粘贴到CUDA安装目录下对应的文件夹中。")]),t._v(" "),c("h3",{attrs:{id:"测试cuda是否安装成功"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#测试cuda是否安装成功"}},[t._v("#")]),t._v(" 测试CUDA是否安装成功")]),t._v(" "),c("p",[t._v("打开conda窗口，输入"),c("code",[t._v("ncvv -V")]),t._v("，出现如下提示，则安装成功 "),c("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20201018145902.png",alt:""}})]),t._v(" "),c("h2",{attrs:{id:"安装gpu版本的pytorch"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#安装gpu版本的pytorch"}},[t._v("#")]),t._v(" 安装GPU版本的PyTorch")]),t._v(" "),c("p",[t._v("此处使用conda来进行安装")]),t._v(" "),c("h3",{attrs:{id:"设置虚拟环境"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#设置虚拟环境"}},[t._v("#")]),t._v(" 设置虚拟环境")]),t._v(" "),c("ol",[c("li",[t._v("在conda终端中输入如下命令，新建一个名称为pytorch的虚拟环境，环境中使用python3.7")])]),t._v(" "),c("p",[t._v("​"),c("br"),t._v("\nconda create --name pytorch python=3.7")]),t._v(" "),c("ol",{attrs:{start:"2"}},[c("li",[t._v("激活虚拟环境pytorch，在这个环境中进行pytorch的安装")])]),t._v(" "),c("p",[t._v("​"),c("br"),t._v("\nconda activate pytorch")]),t._v(" "),c("h3",{attrs:{id:"安装pytorch"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#安装pytorch"}},[t._v("#")]),t._v(" 安装Pytorch")]),t._v(" "),c("ol",[c("li",[t._v("进入"),c("a",{attrs:{href:"https://pytorch.org/get-started/locally/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),c("OutboundLink")],1)]),t._v(" "),c("li",[t._v("选择对应的配置后，复制图中红色矩形框中的命令")])]),t._v(" "),c("p",[c("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20201018143535.png",alt:""}})]),t._v(" "),c("blockquote",[c("p",[t._v("提示：电脑上安装的CUDA版本的，一定要和Pytorch官网上的CUDA版本对应起来。")])]),t._v(" "),c("ol",{attrs:{start:"3"}},[c("li",[c("p",[t._v("在激活的虚拟环境中，运行上述复制的命令，注意直接复制粘贴运行的话，安装过程会非常缓慢， "),c("strong",[t._v("即使你已经配置使用国内的源")]),t._v(" ，问题在于：此条命令中的"),c("code",[t._v("-c pytorch")]),t._v("又再一次指定了源，网上有的教程建议直接将"),c("code",[t._v("-c pytorch")]),t._v("删除， "),c("em",[t._v("但这是一个神坑！！！")]),t._v(" ，如果删除了，则默认会给您装上cpu版本的torch，如下图： "),c("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20201019152148.png",alt:""}}),t._v(" 使用"),c("code",[t._v("-c pytorch")]),t._v("安装非常慢，还会出错，不使用"),c("code",[t._v("-c pytorch")]),t._v("，虽然使用的是国内的源安装，但又会自动给您安排上cpu版本的torch，所以，怎么解决呢？笔者自己尝试出了一个小方法：使用下述命令")]),t._v(" "),c("div",{staticClass:"language- extra-class"},[c("pre",[c("code",[t._v("   ```shell\n   conda install pytorch torchvision cudatoolkit=10.2 -c https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/\n   ```\n")])])])])]),t._v(" "),c("p",[t._v("意思就是指定源，但我们指定使用清华的源，安装的是GPU版本的torch，下载速度有很大的提升！")]),t._v(" "),c("h3",{attrs:{id:"测试是否安装成功"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#测试是否安装成功"}},[t._v("#")]),t._v(" 测试是否安装成功")]),t._v(" "),c("ol",[c("li",[c("p",[t._v("查看自己的torch版本 打开conda安装的包的目录，简单看下刚刚安装的pytorch的名称，图中可以看到我们安装的pytorch的版本号是1.6.0，对应着python3.7，cuda10.2，cudnn7.0 "),c("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20201019154241.png",alt:""}})])]),t._v(" "),c("li",[c("p",[t._v("验证torch是否安装成功")]),t._v(" "),c("p",[c("code",[t._v("import torch")])])])]),t._v(" "),c("p",[t._v("没有报错，则安装成功")]),t._v(" "),c("ol",{attrs:{start:"3"}},[c("li",[c("p",[t._v("安装gpu版本的torch是否可用")]),t._v(" "),c("p",[c("code",[t._v("torch.cuda.is_available()")])])])]),t._v(" "),c("p",[t._v("输出True，则安装成功；输出False，则gpu版本安装失败 "),c("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20201019154435.png",alt:""}})]),t._v(" "),c("h2",{attrs:{id:"遇到的问题"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#遇到的问题"}},[t._v("#")]),t._v(" 遇到的问题")]),t._v(" "),c("p",[c("strong",[t._v("问题一：")]),t._v(" 输入命令后，安装Pytorch相关的包，下载速度非常慢，最终无法完成安装提示失败 "),c("img",{attrs:{src:"https://my-imags.oss-cn-shanghai.aliyuncs.com/pic/20201018151405.png",alt:""}}),t._v(" "),c("strong",[t._v("解决办法：")])]),t._v(" "),c("ul",[c("li",[c("code",[t._v("conda dactivate")]),t._v("退出当前环境")]),t._v(" "),c("li",[c("code",[t._v("conda remove -n your-env-name --all")]),t._v(" 删除当前的环境")]),t._v(" "),c("li",[c("code",[t._v("conda create --name your-env-name python=3.7")]),t._v("重新创建一个环境")]),t._v(" "),c("li",[c("code",[t._v("conda install pytorch torchvision cudatoolkit=10.2 -c https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/")]),t._v("在新环境中输入复制的命令，指定使用清华的源，")])]),t._v(" "),c("p",[c("strong",[t._v("问题二：")]),t._v(" CUDA和Pytorch安装好了后，输入"),c("code",[t._v("torch.cuda.is_available()")]),t._v("仍然为"),c("code",[t._v("False")]),t._v(" "),c("strong",[t._v("原因分析：")])]),t._v(" "),c("ol",[c("li",[t._v("CUDA没有配置好")]),t._v(" "),c("li",[t._v("安装的torch是cpu版本的")])]),t._v(" "),c("p",[c("strong",[t._v("解决办法：")])]),t._v(" "),c("ol",[c("li",[t._v("重新配置CUDA")])]),t._v(" "),c("p",[t._v("卸载CUDA11.0，重新安装CUDA10.2，然后再安装对应版本的Pytorch 卸载CUDA的步骤：")]),t._v(" "),c("ul",[c("li",[t._v("打开控制面板")]),t._v(" "),c("li",[t._v("选择程序和功能")]),t._v(" "),c("li",[t._v("按时间排序，删除那天你安装的所有NVIDIA和CUDA相关的文件")])]),t._v(" "),c("ol",{attrs:{start:"2"}},[c("li",[c("p",[t._v("重新安装Pytorch 一定要指定国内的源来安装Pytorch，一方面速度快，能安装成功；另一方面，不会默认给你安装cpu版本的Pytorch")]),t._v(" "),c("p",[c("code",[t._v("conda install pytorch torchvision cudatoolkit=10.2 -c https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/")])])])]),t._v(" "),c("p",[t._v("折腾了大半天，给我点个赞吧~😲")])])}),[],!1,null,null,null);a.default=r.exports}}]);